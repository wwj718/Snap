<blocks app="Snap! 8.2, https://snap.berkeley.edu" version="2"><palette><category name="Python" color="0,116,143,1"/><category name="CodeLab Adapter" color="128,128,128,1"/></palette><block-definition s="ğŸ help" type="command" category="Python"><header></header><code></code><translations></translations><inputs></inputs><script><block s="doApplyExtension"><l>eim_helper(fname, args)</l><list><l>openurl</l><block s="reportNewList"><list><l>https://adapter.codelab.club/extension_guide/extension_python_kernel/</l></list></block></list></block></script><scripts><comment x="110" y="109.05641025641027" w="184.6153846153846" collapsed="false">todo&#xD;Python function like snap js function block</comment></scripts></block-definition><block-definition s="ğŸ %&apos;operate&apos; extension_python" type="command" category="Python"><header></header><code></code><translations></translations><inputs><input type="%txt">start<options>start&#xD;stop</options></input></inputs><script><custom-block s="ğŸ”¥ %s extension: %txt"><block var="operate"/><l>extension_python</l></custom-block></script></block-definition><block-definition s="ğŸ is extension_python turned on?" type="predicate" category="Python"><header></header><code></code><translations></translations><inputs></inputs><script><block s="doReport"><custom-block s="ğŸ”¥ is extension: %txt turned on?"><l>extension_python</l></custom-block></block></script></block-definition><block-definition s="ğŸ %&apos;content&apos; received?" type="predicate" category="Python"><header></header><code></code><translations></translations><inputs><input type="%txt">3</input></inputs><script><block s="doReport"><custom-block s="ğŸ”¥ topic: %txt message: %txt received?"><l>eim/extension_python</l><block var="content"/></custom-block></block></script></block-definition><block-definition s="ğŸ broadcast %&apos;content&apos; and wait" type="command" category="Python"><header></header><code></code><translations></translations><inputs><input type="%txt">1+2</input></inputs><script><custom-block s="ğŸ”¥ broadcast %txt %txt and wait %br options %mult%s"><l>eim/extension_python</l><block var="content"/><list><l></l></list></custom-block></script></block-definition><block-definition s="ğŸ broadcast %&apos;content&apos;" type="command" category="Python"><header></header><code></code><translations></translations><inputs><input type="%txt">1+2</input></inputs><script><custom-block s="ğŸ”¥ broadcast %txt %txt"><l>eim/extension_python</l><block var="content"/></custom-block></script></block-definition><block-definition s="ğŸ broadcast %&apos;content&apos; and wait." type="reporter" category="Python"><header></header><code></code><translations></translations><inputs><input type="%txt">1+2</input></inputs><script><block s="doReport"><custom-block s="ğŸ”¥ broadcast %txt %txt and wait. %br options %mult%s"><l>eim/extension_python</l><block var="content"/><list><l></l></list></custom-block></block></script></block-definition><block-definition s="ğŸ”¥ %&apos;operate&apos; extension: %&apos;ext_name&apos;" type="command" category="CodeLab Adapter"><comment x="0" y="0" w="164" collapsed="false">å¯åŠ¨/åœæ­¢ æ’ä»¶</comment><header></header><code></code><translations></translations><inputs><input type="%s" readonly="true">start<options>start&#xD;stop</options></input><input type="%txt">extension_python<options>extension_usb_microbit&#xD;extension_microbit_radio&#xD;extension_jupyterlab&#xD;extension_python&#xD;extension_NetworkZero&#xD;extension_arduino_uno&#xD;extension_simple_pyboard&#xD;extension_uart_adapter&#xD;extension_Yanshee&#xD;extension_Siri&#xD;extension_webserver&#xD;extension_webUI_manager&#xD;extension_stage&#xD;extension_wechat</options></input></inputs><script><block s="doDeclareVariables"><list><l>isDone</l></list></block><block s="doIf"><block s="reportNot"><custom-block s="ğŸ”¥ is Adapter running?"></custom-block></block><script><block s="doApplyExtension"><l>err_error(msg)</l><list><l>è¯·è¿è¡Œ Adapter</l></list></block></script></block><block s="doIf"><block s="reportVariadicAnd"><list><block s="reportVariadicEquals"><list><block var="operate"/><l>stop</l></list></block><block s="reportNot"><custom-block s="ğŸ”¥ is extension: %txt turned on?"><block var="ext_name"/></custom-block></block></list></block><script><block s="doStopThis"><l><option>this block</option></l></block></script></block><block s="doApplyExtension"><l>eim_control(plugin, content, ext)</l><list><l>extension</l><block var="operate"/><block var="ext_name"/></list></block><block s="doWaitUntil"><block var="isDone"/></block></script></block-definition><block-definition s="ğŸ”¥ is extension: %&apos;ext_name&apos; turned on?" type="predicate" category="CodeLab Adapter"><comment x="0" y="0" w="268" collapsed="false">æ£€æŸ¥æ’ä»¶æ˜¯å¦å¯åŠ¨</comment><header></header><code></code><translations>zh_CN:ğŸ”¥ _ å·²å¼€å¯?&#xD;</translations><inputs><input type="%txt">extension_python<options>extension_usb_microbit&#xD;extension_microbit_radio&#xD;extension_jupyterlab&#xD;extension_python&#xD;extension_NetworkZero&#xD;extension_arduino_uno&#xD;extension_simple_pyboard&#xD;extension_uart_adapter&#xD;extension_Yanshee&#xD;extension_Siri&#xD;extension_webserver&#xD;extension_webUI_manager&#xD;extension_stage&#xD;extension_wechat</options></input></inputs><script><block s="doIf"><block s="reportNot"><custom-block s="ğŸ”¥ is Adapter running?"></custom-block></block><script><block s="doApplyExtension"><l>err_error(msg)</l><list><l>è¯·è¿è¡Œ Adapter</l></list></block></script></block><block s="doReport"><block s="reportPipe"><block s="reportApplyExtension"><l>eim_get(name)</l><list><l>extstate</l></list></block><list><block s="reifyReporter"><autolambda><block s="reportTextSplit"><l></l><l><option>json</option></l></block></autolambda><list></list></block><block s="reifyReporter"><autolambda><block s="reportListItem"><block var="ext_name"/><l/></block></autolambda><list></list></block><block s="reifyReporter"><autolambda><block s="reportListItem"><l>is_running</l><l/></block></autolambda><list></list></block></list></block></block></script></block-definition><block-definition s="ğŸ”¥ broadcast %&apos;node_id&apos; %&apos;content&apos; and wait. $nl options %&apos;options&apos;" type="reporter" category="CodeLab Adapter"><comment x="0" y="0" w="344" collapsed="false">å¾€æŸä¸ªä¸»é¢˜å‘é€æ¶ˆæ¯ï¼Œå¹¶ç­‰å¾…è¿”å›ç»“æœï¼ˆå‘å¾€Adapterï¼‰&#xD;options çš„ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šå½“å‰ç§¯æœ¨çš„è¶…æ—¶æ—¶é—´ï¼Œé»˜è®¤æ˜¯ 5 ç§’ï¼Œç”± set timeout æ§åˆ¶</comment><header></header><code></code><translations>zh_CN:ğŸ”¥ å¹¿æ’­ _ _ å¹¶ç­‰å¾….&#xD;</translations><inputs><input type="%txt">eim/extension_python</input><input type="%txt">1+2</input><input type="%mult%s"></input></inputs><script><block s="doDeclareVariables"><list><l>isDone</l><l>reply</l></list></block><block s="doIf"><block s="reportNot"><custom-block s="ğŸ”¥ is Adapter running?"></custom-block></block><script><block s="doApplyExtension"><l>err_error(msg)</l><list><l>è¯·è¿è¡Œ Adapter</l></list></block></script></block><block s="doApplyExtension"><l>eim_broadcastwait(node_id, content, timeout)</l><list><block var="node_id"/><block var="content"/><block s="reportListItem"><l>1</l><block var="options"/></block></list><comment w="223.33333333333334" collapsed="false">timeout é»˜è®¤æ˜¯ 5 ç§’(ç”±set timeout ç§¯æœ¨æ§åˆ¶)&#xD;&#xD;</comment></block><block s="doWaitUntil"><block var="isDone"/></block><block s="doReport"><block var="reply"/></block></script></block-definition><block-definition s="ğŸ”¥ broadcast %&apos;node_id&apos; %&apos;content&apos; and wait $nl options %&apos;options&apos;" type="command" category="CodeLab Adapter"><comment x="0" y="0" w="329.3333333333333" collapsed="false">å¾€æŸä¸ªä¸»é¢˜å‘é€æ¶ˆæ¯ï¼Œå¹¶ç­‰å¾…å®Œæˆï¼ˆå‘å¾€Adapter)&#xD;options çš„ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šå½“å‰ç§¯æœ¨çš„è¶…æ—¶æ—¶é—´ï¼Œé»˜è®¤æ˜¯ 5 ç§’ï¼Œç”± set timeout æ§åˆ¶</comment><header></header><code></code><translations>zh_CN:ğŸ”¥ å¹¿æ’­ _ _ å¹¶ç­‰å¾…&#xD;</translations><inputs><input type="%txt">eim/extension_python</input><input type="%txt">1+2</input><input type="%mult%s"></input></inputs><script><block s="doDeclareVariables"><list><l>isDone</l><l>reply</l></list></block><block s="doIf"><block s="reportNot"><custom-block s="ğŸ”¥ is Adapter running?"></custom-block></block><script><block s="doApplyExtension"><l>err_error(msg)</l><list><l>è¯·è¿è¡Œ Adapter</l></list></block></script></block><block s="doApplyExtension"><l>eim_broadcastwait(node_id, content, timeout)</l><list><block var="node_id"/><block var="content"/><block s="reportListItem"><l>1</l><block var="options"/></block></list><comment w="223.33333333333334" collapsed="false">timeout é»˜è®¤æ˜¯ 5 ç§’(ç”±set timeout ç§¯æœ¨æ§åˆ¶)&#xD;&#xD;</comment></block><block s="doWaitUntil"><block var="isDone"/></block></script></block-definition><block-definition s="ğŸ”¥ broadcast %&apos;node_id&apos; %&apos;content&apos;" type="command" category="CodeLab Adapter"><comment x="0" y="0" w="90" collapsed="false">å¾€æŸä¸ªä¸»é¢˜å‘é€æ¶ˆæ¯ï¼Œä¸ç­‰å¾…ï¼ˆå‘å¾€Adapterï¼‰</comment><header></header><code></code><translations>zh_CN:ğŸ”¥ å¹¿æ’­ _ _&#xD;</translations><inputs><input type="%txt">eim/extension_python</input><input type="%txt">1+2</input></inputs><script><block s="doIf"><block s="reportNot"><custom-block s="ğŸ”¥ is Adapter running?"></custom-block></block><script><block s="doApplyExtension"><l>err_error(msg)</l><list><l>è¯·è¿è¡Œ Adapter</l></list></block></script></block><block s="doApplyExtension"><l>eim_broadcast(node_id, content)</l><list><block var="node_id"/><block var="content"/></list></block></script></block-definition><block-definition s="ğŸ”¥ topic: %&apos;topic&apos; message: %&apos;message&apos; received?" type="predicate" category="CodeLab Adapter"><comment x="0" y="0" w="176" collapsed="false">æ˜¯å¦æ¥æ”¶åˆ°æŸä¸ªä¸»é¢˜çš„æŸä¸ªæ¶ˆæ¯</comment><variables><list struct="atomic" id="239">old_time</list></variables><header></header><code></code><translations>zh_CN:ğŸ”¥ æ”¶åˆ° _  _ ?&#xD;</translations><inputs><input type="%txt">eim/extension_python</input><input type="%txt">3<options>any</options></input></inputs><script><block s="doDeclareVariables"><list><l>last_message</l><l>last_time</l></list></block><block s="doIf"><block s="reportNot"><custom-block s="ğŸ”¥ is Adapter running?"></custom-block></block><script><block s="doApplyExtension"><l>err_error(msg)</l><list><l>è¯·è¿è¡Œ Adapter</l></list></block></script></block><block s="doSetVar"><l>last_message</l><custom-block s="ğŸ”¥ received %txt message"><block var="topic"/></custom-block></block><block s="doIf"><block s="reportVariadicEquals"><list><block var="last_message"/><l></l></list></block><script><block s="doReport"><block s="reportBoolean"><l><bool>false</bool></l></block></block></script></block><block s="doSetVar"><l>last_time</l><block s="reportPipe"><block s="reportApplyExtension"><l>eim_get(name)</l><list><l>pluginmsgs</l></list></block><list><block s="reifyReporter"><autolambda><block s="reportTextSplit"><l></l><l><option>json</option></l></block></autolambda><list></list></block><block s="reifyReporter"><autolambda><block s="reportListItem"><block var="topic"/><l/></block></autolambda><list></list></block><block s="reifyReporter"><autolambda><block s="reportListItem"><l>timestamp</l><l/></block></autolambda><list></list></block></list></block></block><block s="doIf"><block s="reportVariadicAnd"><list><block s="reportVariadicGreaterThan"><list><block var="last_time"/><block var="old_time"/></list></block><block s="reportVariadicOr"><list><block s="reportVariadicEquals"><list><block var="message"/><block var="last_message"/></list></block><block s="reportVariadicEquals"><list><block var="message"/><l>any</l></list></block></list></block></list></block><script><block s="doSetVar"><l>old_time</l><block var="last_time"/></block><block s="doReport"><block s="reportBoolean"><l><bool>true</bool></l></block></block></script></block><block s="doReport"><block s="reportBoolean"><l><bool>false</bool></l></block></block></script></block-definition><block-definition s="ğŸ”¥ is Adapter running?" type="predicate" category="CodeLab Adapter"><comment x="0" y="0" w="192" collapsed="false">æ£€æŸ¥Adapteræ˜¯å¦è¿è¡Œ</comment><header></header><code></code><translations>zh_CN:ğŸ”¥ Adapter å·²å¼€å¯?&#xD;</translations><inputs></inputs><script><block s="doReport"><block s="reportApplyExtension"><l>eim_get(name)</l><list><l>running</l></list></block></block></script></block-definition><block-definition s="ğŸ”¥ received %&apos;node_id&apos; message" type="reporter" category="CodeLab Adapter"><comment x="0" y="0" w="111" collapsed="false">æŸä¸ªä¸»é¢˜çš„æœ€æ–°æ¶ˆæ¯</comment><header></header><code></code><translations>zh_CN:ğŸ”¥ æ”¶åˆ°çš„ _ æ¶ˆæ¯&#xD;</translations><inputs><input type="%txt">eim/extension_python</input></inputs><script><block s="doIf"><block s="reportNot"><custom-block s="ğŸ”¥ is Adapter running?"></custom-block></block><script><block s="doApplyExtension"><l>err_error(msg)</l><list><l>è¯·è¿è¡Œ Adapter</l></list></block></script></block><block s="doIf"><block s="reportVariadicOr"><list><block s="reportVariadicEquals"><list><block s="reportApplyExtension"><l>eim_get(name)</l><list><l>pluginmsgs</l></list></block><l>{}</l></list></block><block s="reportVariadicEquals"><list><block s="reportListItem"><block var="node_id"/><block s="reportTextSplit"><block s="reportApplyExtension"><l>eim_get(name)</l><list><l>pluginmsgs</l></list></block><l><option>json</option></l></block></block><l></l></list></block></list></block><script><block s="doReport"><l></l></block></script></block><block s="doIfElse"><block s="reportVariadicEquals"><list><block var="node_id"/><block s="reportPipe"><block s="reportApplyExtension"><l>eim_get(name)</l><list><l>pluginmsgs</l></list></block><list><block s="reifyReporter"><autolambda><block s="reportTextSplit"><l></l><l><option>json</option></l></block></autolambda><list></list></block><block s="reifyReporter"><autolambda><block s="reportListItem"><block var="node_id"/><l/></block></autolambda><list></list></block><block s="reifyReporter"><autolambda><block s="reportListItem"><l>message</l><l/></block></autolambda><list></list></block><block s="reifyReporter"><autolambda><block s="reportListItem"><l>payload</l><l/></block></autolambda><list></list></block><block s="reifyReporter"><autolambda><block s="reportListItem"><l>node_id</l><l/></block></autolambda><list></list></block></list></block></list></block><script><block s="doReport"><block s="reportPipe"><block s="reportApplyExtension"><l>eim_get(name)</l><list><l>pluginmsgs</l></list></block><list><block s="reifyReporter"><autolambda><block s="reportTextSplit"><l></l><l><option>json</option></l></block></autolambda><list></list></block><block s="reifyReporter"><autolambda><block s="reportListItem"><block var="node_id"/><l/></block></autolambda><list></list></block><block s="reifyReporter"><autolambda><block s="reportListItem"><l>message</l><l/></block></autolambda><list></list></block><block s="reifyReporter"><autolambda><block s="reportListItem"><l>payload</l><l/></block></autolambda><list></list></block><block s="reifyReporter"><autolambda><block s="reportListItem"><l>content</l><l/></block></autolambda><list></list></block></list></block></block></script><script><block s="doReport"><l></l></block></script></block></script></block-definition></blocks>